import{r as u,p as V,m as U,L as W,c as n,b as s,h as r,t as l,M as q,F as h,q as A,f as T,v as S,u as F,i,n as E}from"./vendor-DMmp5gzX.js";import{_ as H,a as k}from"./auth-CM7Hud5Y.js";const G={class:"we-page"},Q={class:"we-container we-review"},Y={class:"we-summaryGrid"},Z={class:"we-summaryCard is-main"},j={class:"we-summaryValue"},J={class:"we-summaryCard"},K={class:"we-progressSmall"},X={class:"we-filterRow"},ss={class:"we-tabGroup"},es=["onClick"],ts={class:"we-searchBox"},as={key:0,class:"we-loading"},os={key:1,class:"we-empty"},ls={key:2,class:"we-noteList"},rs={class:"we-noteCard__head"},ns={class:"we-chipRow"},is={class:"we-chip is-category"},ds={class:"we-chip is-level"},us={class:"we-chip is-date"},cs={class:"we-chip is-part"},vs=["onClick"],ws={class:"we-noteCard__body"},ps=["innerHTML"],ms={class:"we-answerCompare"},gs={class:"we-ansBox is-wrong"},fs={class:"we-ansValue"},ys={class:"we-ansBox is-correct"},_s={class:"we-ansValue"},Cs={class:"we-explanationBox"},bs={class:"we-explainText"},hs={class:"we-memoPad"},As=["onUpdate:modelValue"],ks={class:"we-noteCard__footer"},Ls={class:"we-tags"},xs=["onClick"],Rs={class:"we-loadMoreRow"},Ns=["disabled"],M=68,Vs=42,Ts="RC Part 5",Ss={__name:"WrongNoteDashBoard",setup(Ms){const L=F(),B=a=>L.push(a),d=u("ALL"),_=u(""),c=u([]),v=u(!1),f=u(0),w=u(20),p=u(!0);function z(){const a=localStorage.getItem("token");return a?{Authorization:`Bearer ${a}`}:(alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."),L.push("/login"),null)}async function C(a=!1){const e=z();if(e&&(a&&(f.value=0,c.value=[],p.value=!0),!!p.value)){v.value=!0;try{if(d.value==="ALL"){const[t,o]=await Promise.all([k.get("/wrong-note/RC",{params:{page:f.value,size:w.value},headers:e}),k.get("/wrong-note/VOCA",{params:{page:f.value,size:w.value},headers:e})]),m=Array.isArray(t.data?.ok)?t.data.ok:[],g=Array.isArray(o.data?.ok)?o.data.ok:[],y=[...m,...g];y.sort((R,N)=>{const I=R?.createdAt?new Date(R.createdAt).getTime():0;return(N?.createdAt?new Date(N.createdAt).getTime():0)-I}),c.value.push(...y),p.value=m.length>=w.value||g.length>=w.value}else{const t=await k.get(`/wrong-note/${d.value}`,{params:{page:f.value,size:w.value},headers:e}),o=Array.isArray(t.data?.ok)?t.data.ok:[];c.value.push(...o),p.value=o.length>=w.value}f.value+=1}catch(t){console.error("ì˜¤ë‹µë…¸íŠ¸ ì¡°íšŒ ì‹¤íŒ¨",t),alert("ì˜¤ë‹µë…¸íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{v.value=!1}}}function O(a){if(a?.category)return String(a.category).toUpperCase();if(a?.type){const t=String(a.type).toUpperCase();if(t.includes("VOCA"))return"VOCA";if(t.includes("RC"))return"RC"}return(Array.isArray(a?.tags)?a.tags.map(t=>String(t).toLowerCase()):[]).some(t=>["voca","vocabulary","word","conversation","speaking"].includes(t))||Number(a?.part)===0?"VOCA":"RC"}const b=V(()=>(c.value||[]).map(a=>{const e=O(a),t=a?.content?.passage??a?.content?.word??"",o=a?.content?.questions?.[0]??null,m=o?.explanation??a?.explanation??"",g=o?.answer??a?.correctAnswer??"",y=a?.createdAt?String(a.createdAt).slice(0,10):"-";return{...a,category:e,passage:t,explanation:m,correctAnswer:g,solvedAt:y,tags:Array.isArray(a?.tags)?a.tags:[],memo:a?.memo??"",level:a?.level??"BRONZE",part:Number.isFinite(Number(a?.part))?Number(a.part):0}})),x=V(()=>{const a=_.value.trim().toLowerCase();return b.value.filter(e=>{const t=d.value==="ALL"||e.category===d.value;if(!a)return t;const o=String(e.passage||"").toLowerCase().includes(a),m=(e.tags||[]).some(g=>String(g).toLowerCase().includes(a));return t&&(o||m)})});function $(a){return String(a||"").replace(/-+/g,'<span class="we-blank">_______</span>')}function D(a){console.log("Retry problem:",a)}async function P(a){confirm("ì˜¤ë‹µë…¸íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(c.value=c.value.filter(e=>e.id!==a))}return U(()=>{C(!0)}),W(d,()=>{C(!0)}),(a,e)=>(i(),n("div",G,[s("main",Q,[s("section",Y,[s("div",Z,[e[4]||(e[4]=s("div",{class:"we-summaryLabel"},"Total Wrong Notes",-1)),s("div",j,[r(l(x.value.length),1),e[3]||(e[3]=s("span",null,"ê±´",-1))]),e[5]||(e[5]=s("div",{class:"we-summaryTrend"},[s("i",{class:"fa-solid fa-arrow-down"}),r(" ì§€ë‚œì£¼ ëŒ€ë¹„ 12% ê°ì†Œ ")],-1))]),s("div",{class:"we-summaryCard"},[e[6]||(e[6]=s("div",{class:"we-summaryLabel"},"Weakness Part",-1)),s("div",{class:"we-summaryValue"},l(Ts)),s("div",{class:"we-summaryTag"},"ì˜¤ë‹µë¥  "+l(Vs)+"%")]),s("div",J,[e[8]||(e[8]=s("div",{class:"we-summaryLabel"},"Mastery Rate",-1)),s("div",{class:"we-summaryValue"},[r(l(M)),e[7]||(e[7]=s("span",null,"%",-1))]),s("div",K,[s("div",{class:"we-progressFill",style:q({width:M+"%"})},null,4)])])]),s("div",X,[s("div",ss,[(i(),n(h,null,A(["ALL","RC","VOCA"],t=>s("button",{key:t,class:E(["we-tabItem",d.value===t?"is-active":""]),onClick:o=>d.value=t},l(t),11,es)),64))]),s("div",ts,[e[9]||(e[9]=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),T(s("input",{type:"text",placeholder:"ì˜¤ë‹µ íƒœê·¸, ë¬¸ì¥/ë‹¨ì–´ ê²€ìƒ‰...","onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t)},null,512),[[S,_.value]])])]),v.value&&b.value.length===0?(i(),n("div",as,e[10]||(e[10]=[s("i",{class:"fa-solid fa-circle-notch fa-spin"},null,-1),r(" ì˜¤ë‹µë…¸íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘... ")]))):!v.value&&b.value.length===0?(i(),n("div",os,[e[12]||(e[12]=s("div",{class:"we-emptyTitle"},"ì˜¤ë‹µë…¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.",-1)),e[13]||(e[13]=s("div",{class:"we-emptySub"},"ë¬¸ì œë¥¼ í’€ê³  í‹€ë¦° ë¬¸ì œë¥¼ ì €ì¥í•´ë³´ì„¸ìš”.",-1)),s("button",{class:"we-btn we-btn--small",onClick:e[1]||(e[1]=t=>B("/practice/rc"))},e[11]||(e[11]=[s("i",{class:"fa-solid fa-play"},null,-1),r(" RC í’€ëŸ¬ ê°€ê¸° ")]))])):(i(),n("div",ls,[(i(!0),n(h,null,A(x.value,t=>(i(),n("div",{key:t.id,class:"we-noteCard"},[s("div",rs,[s("div",ns,[s("span",is,l(t.category),1),s("span",ds,l(t.level),1),s("span",us,l(t.solvedAt),1),s("span",cs,"Part "+l(t.part),1)]),s("button",{class:"we-btnIcon",onClick:o=>P(t.id)},e[14]||(e[14]=[s("i",{class:"fa-solid fa-trash-can"},null,-1)]),8,vs)]),s("div",ws,[s("h3",{class:"we-passageSnippet",innerHTML:$(t.passage)},null,8,ps),s("div",ms,[s("div",gs,[e[16]||(e[16]=s("div",{class:"we-ansLabel"},"Your Answer",-1)),s("div",fs,[e[15]||(e[15]=s("i",{class:"fa-solid fa-circle-xmark"},null,-1)),r(" "+l(t.userAnswer??"-"),1)])]),s("div",ys,[e[18]||(e[18]=s("div",{class:"we-ansLabel"},"Correct Answer",-1)),s("div",_s,[e[17]||(e[17]=s("i",{class:"fa-solid fa-circle-check"},null,-1)),r(" "+l(t.correctAnswer??"-"),1)])])]),s("div",Cs,[e[19]||(e[19]=s("div",{class:"we-explainTitle"},[s("i",{class:"fa-solid fa-lightbulb"}),r(" Explanation ")],-1)),s("p",bs,l(t.explanation||"í•´ì„¤ì´ ì—†ìŠµë‹ˆë‹¤."),1)]),s("div",hs,[e[20]||(e[20]=s("div",{class:"we-memoTitle"},"ğŸ“Œ My Learning Note",-1)),T(s("textarea",{class:"we-memoInput","onUpdate:modelValue":o=>t.memo=o,placeholder:"ë‚˜ë§Œì˜ ì•”ê¸° ë¹„ë²•ì„ ê¸°ë¡í•˜ì„¸ìš”... (í˜„ì¬ëŠ” ë¡œì»¬ ì €ì¥)"},null,8,As),[[S,t.memo]])])]),s("div",ks,[s("div",Ls,[(i(!0),n(h,null,A(t.tags,o=>(i(),n("span",{key:o},"#"+l(o),1))),128))]),s("button",{class:"we-btn we-btn--primary we-btn--small",onClick:o=>D(t.id)},e[21]||(e[21]=[s("i",{class:"fa-solid fa-rotate-right"},null,-1),r(" ë‹¤ì‹œ í’€ì–´ë³´ê¸° ")]),8,xs)])]))),128)),s("div",Rs,[s("button",{class:"we-btn",onClick:e[2]||(e[2]=t=>C(!1)),disabled:v.value||!p.value},[e[22]||(e[22]=s("i",{class:"fa-solid fa-rotate"},null,-1)),r(" "+l(v.value?"ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...":p.value?"ë” ë³´ê¸°":"ë§ˆì§€ë§‰ì…ë‹ˆë‹¤"),1)],8,Ns)])]))])]))}},$s=H(Ss,[["__scopeId","data-v-ab728ae9"]]);export{$s as default};
