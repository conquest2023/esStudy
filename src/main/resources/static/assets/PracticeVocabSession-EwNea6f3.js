import"./index-CxoReeRl.js";import{p as r,c as x,i as f,b as e,h as o,t as i,n as N,e as V,F as U,q as J,r as v,m as W,a4 as K,P as X,M as Y,u as Z}from"./vendor-DMmp5gzX.js";import{_}from"./auth-CM7Hud5Y.js";const ee={class:"we-rcGrid"},te={class:"we-card we-pane"},se={class:"we-paneHead"},oe={class:"we-timer"},ne={style:{display:"flex","align-items":"flex-start","justify-content":"space-between",gap:"12px"}},le={style:{"margin-top":"10px","font-weight":"900","font-size":"42px","letter-spacing":"-1px",color:"#0f172a"}},ae={style:{"margin-top":"8px",color:"#64748b","font-weight":"900","font-family":"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace"}},ie={style:{display:"flex",gap:"8px"}},re={class:"we-explain",style:{"margin-top":"16px"}},ue={class:"we-explainBody"},de={class:"we-card we-pane"},ce={class:"we-paneHead"},pe={class:"we-chip",style:{"box-shadow":"none"}},ve={class:"we-options"},fe=["onClick"],we={class:"we-optBadge"},ge={class:"we-optText"},me={class:"we-actions"},be=["disabled"],ye=["disabled"],xe=["disabled"],ke=["disabled"],$e={key:0,class:"we-explain"},he={class:"we-explainBody"},Ce={style:{"margin-top":"10px",color:"#94a3b8","font-weight":"800","font-size":"12px"}},Be={style:{color:"#0f172a"}},Se={__name:"VocabQuestionRenderer",props:{question:{type:Object,required:!0},selectedIndex:{type:Number,default:null},result:{type:Object,default:null},showExplanation:{type:Boolean,default:!1},timerText:{type:String,default:"00:00"},starred:{type:Boolean,default:!1}},emits:["select","grade","toggle-explain","next","save-wrong","toggle-star"],setup(a){const c=a,w=r(()=>c.question??{}),d=r(()=>w.value.content??{}),B=r(()=>d.value.questions?.[0]??{}),S=r(()=>d.value.word??"â€”"),q=r(()=>d.value.pronunciation??"/â€”/"),k=r(()=>d.value.example??"ì˜ˆë¬¸ì´ ì•„ì§ ì—†ì–´ìš”."),g=r(()=>B.value.options??[]),$=r(()=>B.value.explanation??"í•´ì„¤ì´ ì•„ì§ ì—†ì–´ìš”."),h=r(()=>w.value.tags?.length?w.value.tags.join(" Â· "):"voca");function T(l){return String.fromCharCode(65+l)}function j(l){const s=[];return c.selectedIndex===l&&s.push("is-selected"),c.result&&(l===c.result.correctIndex&&s.push("is-correct"),c.selectedIndex===l&&l!==c.result.correctIndex&&s.push("is-wrong")),s.join(" ")}function C(){console.log("speak(dummy):",S.value)}return(l,s)=>(f(),x("div",ee,[e("section",te,[e("div",se,[s[6]||(s[6]=e("div",{class:"we-paneTitle"},[e("i",{class:"fa-solid fa-spell-check",style:{color:"#10b981"}}),o(" VOCA CARD ")],-1)),e("div",oe,[s[5]||(s[5]=e("i",{class:"fa-solid fa-clock"},null,-1)),o(" "+i(a.timerText),1)])]),e("div",ne,[e("div",null,[s[7]||(s[7]=e("div",{style:{"font-weight":"900","letter-spacing":".22em","text-transform":"uppercase",color:"#94a3b8","font-size":"12px"}}," Daily Vocabulary ",-1)),e("div",le,i(S.value),1),e("div",ae,i(q.value),1)]),e("div",ie,[e("button",{type:"button",class:"we-actionBtn",style:{"min-width":"auto",padding:"10px 12px"},onClick:C,title:"ë°œìŒ(ë”ë¯¸)"},s[8]||(s[8]=[e("i",{class:"fa-solid fa-volume-high"},null,-1)])),e("button",{type:"button",class:N(["we-actionBtn",a.starred?"we-actionBtn--primary":""]),style:{"min-width":"auto",padding:"10px 12px"},onClick:s[0]||(s[0]=p=>l.$emit("toggle-star")),title:"ì¦ê²¨ì°¾ê¸°"},s[9]||(s[9]=[e("i",{class:"fa-solid fa-star"},null,-1)]),2)])]),e("div",re,[s[10]||(s[10]=e("div",{class:"we-explainTitle"},[e("div",{style:{width:"10px",height:"10px","border-radius":"999px",background:"#10b981"}}),o(" Example ")],-1)),e("div",ue,i(k.value),1)]),s[11]||(s[11]=e("div",{style:{"margin-top":"12px",color:"#94a3b8","font-weight":"800","font-size":"12px","line-height":"1.6"}},[e("b",{style:{color:"#0f172a"}},"TIP"),o(" â€œê°œë°œ ë¬¸ë§¥ì—ì„œ ì“°ëŠ” ëœ»â€ì„ ë¨¼ì € ê³ ë¥´ëŠ” ê²Œ ì‹¤ì „ì—ì„œ ê°•í•´ì—´~?? ")],-1))]),e("section",de,[e("div",ce,[s[13]||(s[13]=e("div",{class:"we-paneTitle"},[e("i",{class:"fa-solid fa-circle-question",style:{color:"#10b981"}}),o(" QUESTION ")],-1)),e("div",pe,[s[12]||(s[12]=e("i",{class:"fa-solid fa-hashtag"},null,-1)),o(" "+i(h.value),1)])]),s[20]||(s[20]=e("h2",{class:"we-qTitle"},"ê°€ìž¥ ì•Œë§žì€ ëœ»ì„ ê³ ë¥´ì‹œì˜¤.",-1)),s[21]||(s[21]=e("div",{class:"we-qSub"},"ì„ íƒ â†’ ì±„ì  â†’ í•´ì„¤ í™•ì¸ ìˆœì„œë¡œ ì§„í–‰í•´ìš”.",-1)),e("div",ve,[(f(!0),x(U,null,J(g.value,(p,I)=>(f(),x("button",{key:I,type:"button",class:N(["we-opt",j(I)]),onClick:m=>l.$emit("select",I)},[e("div",we,i(T(I)),1),e("div",ge,i(p),1)],10,fe))),128))]),e("div",me,[e("button",{type:"button",class:"we-actionBtn we-actionBtn--primary",disabled:a.selectedIndex===null||!!a.result,onClick:s[1]||(s[1]=p=>l.$emit("grade"))},s[14]||(s[14]=[e("i",{class:"fa-solid fa-check"},null,-1),o(" ì±„ì í•˜ê¸° ")]),8,be),e("button",{type:"button",class:"we-actionBtn",disabled:!a.result,onClick:s[2]||(s[2]=p=>l.$emit("toggle-explain"))},[s[15]||(s[15]=e("i",{class:"fa-solid fa-circle-info"},null,-1)),o(" í•´ì„¤ "+i(a.showExplanation?"ë‹«ê¸°":"ë³´ê¸°"),1)],8,ye),e("button",{type:"button",class:"we-actionBtn we-actionBtn--ghost",disabled:!a.result||a.result?.isCorrect,onClick:s[3]||(s[3]=p=>l.$emit("save-wrong"))},s[16]||(s[16]=[e("i",{class:"fa-solid fa-bookmark"},null,-1),o(" ì˜¤ë‹µ ì €ìž¥ ")]),8,xe),e("button",{type:"button",class:"we-actionBtn",disabled:!a.result,onClick:s[4]||(s[4]=p=>l.$emit("next"))},s[17]||(s[17]=[e("i",{class:"fa-solid fa-arrow-right"},null,-1),o(" ë‹¤ìŒ ")]),8,ke)]),a.showExplanation&&a.result?(f(),x("div",$e,[s[19]||(s[19]=e("div",{class:"we-explainTitle"},[e("div",{style:{width:"10px",height:"10px","border-radius":"999px",background:"#10b981"}}),o(" í•´ì„¤ ")],-1)),e("div",he,i($.value),1),e("div",Ce,[s[18]||(s[18]=o(" ì •ë‹µ: ")),e("b",Be,i(g.value[a.result.correctIndex]),1)])])):V("",!0)])]))}},Te={class:"we-page"},Ie={class:"we-container we-session"},qe={key:0,class:"we-loading-state"},je={key:1,class:"we-complete-state"},Ee={class:"we-complete-actions"},ze={key:2,class:"we-content-wrapper"},Ae={class:"we-sessionHead"},Oe={class:"we-sessionHead__main"},Ne={class:"we-chipRow"},Ve={class:"we-chip"},Me={class:"we-chip"},Re={class:"we-status-card"},Pe={class:"we-status-card__top"},De={class:"we-progress-text"},Le={class:"we-progressTop__bar"},Fe={key:3,class:"we-empty-state"},He={class:"we-bottomTabs"},Ge={class:"we-bottomTabs__inner"},Qe={__name:"PracticeVocabSession",props:{question:{type:Object,required:!0},selectedIndex:{type:Number,default:null},result:{type:Object,default:null},showExplanation:{type:Boolean,default:!1},timerText:{type:String,default:"00:00"},starred:{type:Boolean,default:!1}},setup(a){const c=Z(),w=n=>{c.currentRoute.value.path!==n&&c.push(n)},d=v([]),B=v(!1),S=v(!1),q=v(null),k=v(0),g=v(null),$=v(null),h=v(!1),T=v(!1),j=v("01:24");let C=84,l=null;const s=n=>n?{A:0,B:1,C:2,D:3}[n.toUpperCase().trim()]??0:0;async function p(n=null){B.value=!0,S.value=!1;try{const u=`/api/vocab?size=10${n?`&lastId=${n}`:""}`,b=await fetch(u);if(!b.ok)throw new Error("ë‹¨ì–´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");const y=(await b.json())?.ok;Array.isArray(y)&&y.length>0?(d.value=y.map(A=>{const Q=A.content?.questions||[];return{...A,content:{...A.content,questions:Q.map(O=>({...O,correctIndex:s(O.answer)}))}}}),q.value=y[y.length-1]._id||y[y.length-1].id,k.value=0):n&&alert("ë” ì´ìƒ ë¶ˆëŸ¬ì˜¬ ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.")}catch(t){console.error("Fetch Error:",t)}finally{B.value=!1}}function I(){p(q.value)}W(()=>{p(null),l=setInterval(()=>{C=Math.max(0,C-1);const n=String(Math.floor(C/60)).padStart(2,"0"),t=String(C%60).padStart(2,"0");j.value=`${n}:${t}`},1e3)}),K(()=>{l&&clearInterval(l)});const m=r(()=>d.value[k.value]),E=r(()=>d.value.length),M=r(()=>m.value?.level??"â€”"),R=r(()=>m.value?.tags??[]),P=r(()=>E.value===0?0:Math.round((k.value+1)/E.value*100));function D(n){$.value||(g.value=n)}function L(){if(g.value===null)return;const n=m.value.content.questions[0].correctIndex,t=g.value===n;$.value={isCorrect:t,correctIndex:n},F(t),t||(h.value=!0)}async function F(n){const t=m.value,u=String.fromCharCode(65+g.value),b=localStorage.getItem("token"),z={objectId:t._id||t.id,chosenAnswer:u,isCorrect:n,category:t.type,part:t.part||0,level:t.level};try{await fetch("/api/english/log",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(z)})}catch(y){console.error("Log Save Error:",y)}}function H(){if(k.value>=E.value-1){d.value=[],S.value=!0;return}k.value+=1,g.value=null,$.value=null,h.value=!1,T.value=!1,C=84}async function G(){if(!$.value){alert("ë¬¸ì œë¥¼ ë¨¼ì € í’€ì–´ì£¼ì„¸ìš”.");return}if(!m.value||!confirm("ì˜¤ë‹µë…¸íŠ¸ì— ì €ìž¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))return;const n=localStorage.getItem("token");if(!n){alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."),c.push("/login");return}const t=m.value,u={objectId:t._id||t.id,category:t.type,part:t.part||0,level:t.level};try{const b=await fetch("/api/wrongnote",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(u)});if(b.ok)alert("ì˜¤ë‹µë…¸íŠ¸ì— ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.");else{const z=await b.json();throw new Error(z.message||"ì €ìž¥ ì‹¤íŒ¨")}}catch(b){console.error("ì˜¤ë‹µë…¸íŠ¸ ì €ìž¥ ì‹¤íŒ¨",b),alert("ì˜¤ë‹µë…¸íŠ¸ ì €ìž¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}}return(n,t)=>(f(),x("div",Te,[e("main",Ie,[B.value&&d.value.length===0?(f(),x("div",qe,t[8]||(t[8]=[e("i",{class:"fa-solid fa-circle-notch fa-spin"},null,-1),o(" ë‹¨ì–´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ìž…ë‹ˆë‹¤... ")]))):S.value?(f(),x("div",je,[t[11]||(t[11]=e("div",{class:"we-complete-icon"},"ðŸŽ‰",-1)),t[12]||(t[12]=e("h2",{class:"we-complete-title"},"ë‹¨ì–´ í•™ìŠµ ì™„ë£Œ!",-1)),t[13]||(t[13]=e("p",{class:"we-complete-sub"},"í•œ ì„¸íŠ¸(10ë‹¨ì–´)ë¥¼ ëª¨ë‘ ì •ë³µí•˜ì…¨ìŠµë‹ˆë‹¤.",-1)),e("div",Ee,[e("button",{onClick:I,class:"we-btn we-btn--primary"},t[9]||(t[9]=[e("i",{class:"fa-solid fa-rotate-right"},null,-1),o(" 10ë¬¸ì œ ë” í’€ê¸° ")])),e("button",{onClick:t[0]||(t[0]=u=>w("/wrong-notes")),class:"we-btn we-btn--outline"},t[10]||(t[10]=[e("i",{class:"fa-solid fa-book"},null,-1),o(" ì˜¤ë‹µë…¸íŠ¸ í™•ì¸ ")]))])])):d.value.length>0?(f(),x("div",ze,[e("div",Ae,[e("div",Oe,[t[17]||(t[17]=e("h1",{class:"we-sessionTitle"},"ë‹¨ì–´ í•™ìŠµ",-1)),t[18]||(t[18]=e("p",{class:"we-sessionSub"},"ëœ»/ìš©ë²• ê°ê´€ì‹ Â· ì˜ˆë¬¸ ê¸°ë°˜",-1)),e("div",Ne,[t[16]||(t[16]=e("span",{class:"we-chip"},[e("i",{class:"fa-solid fa-layer-group"}),o(" VOCA")],-1)),e("span",Ve,[t[14]||(t[14]=e("i",{class:"fa-solid fa-medal"},null,-1)),o(" "+i(M.value),1)]),e("span",Me,[t[15]||(t[15]=e("i",{class:"fa-solid fa-hashtag"},null,-1)),o(" "+i(R.value.join(" Â· ")),1)])])]),e("div",Re,[e("div",Pe,[e("div",De,[e("strong",null,i(k.value+1),1),o(" / "+i(E.value),1)]),e("div",Le,[e("div",{class:"we-progressTop__fill",style:Y({width:P.value+"%"})},null,4)])])])]),m.value?(f(),X(Se,{key:0,question:m.value,"selected-index":g.value,result:$.value,"show-explanation":h.value,"timer-text":j.value,starred:T.value,onSelect:D,onGrade:L,onToggleExplain:t[1]||(t[1]=u=>h.value=!h.value),onNext:H,onToggleStar:t[2]||(t[2]=u=>T.value=!T.value),onSaveWrong:G},null,8,["question","selected-index","result","show-explanation","timer-text","starred"])):V("",!0)])):(f(),x("div",Fe,[t[19]||(t[19]=e("p",null,"í•™ìŠµí•  ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.",-1)),e("button",{onClick:t[3]||(t[3]=u=>p(null)),class:"we-btn we-btn--primary",style:{"margin-top":"20px"}}," ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œìž‘ ")])),e("div",He,[e("div",Ge,[e("button",{class:"we-tabBtn",onClick:t[4]||(t[4]=u=>w("/practice/rc"))},t[20]||(t[20]=[e("i",{class:"fa-solid fa-file-pen"},null,-1),o(" RC ")])),e("button",{class:"we-tabBtn is-active",onClick:t[5]||(t[5]=u=>w("/practice/vocab"))},t[21]||(t[21]=[e("i",{class:"fa-solid fa-spell-check"},null,-1),o(" ë‹¨ì–´ ")])),e("button",{class:"we-tabBtn",onClick:t[6]||(t[6]=u=>w("/practice/speaking"))},t[22]||(t[22]=[e("i",{class:"fa-solid fa-microphone-lines"},null,-1),o(" íšŒí™” ")])),e("button",{class:"we-tabBtn",onClick:t[7]||(t[7]=u=>w("/wrong-notes"))},t[23]||(t[23]=[e("i",{class:"fa-solid fa-book-bookmark"},null,-1),o(" ì˜¤ë‹µë…¸íŠ¸ ")]))])])])]))}},Ke=_(Qe,[["__scopeId","data-v-32c3521e"]]);export{Ke as default};
