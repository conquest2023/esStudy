<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìƒˆ Todo ì¶”ê°€</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body {
      background-color: #f8f9fa;
    }

    .container {
      max-width: 600px;
      margin-top: 50px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>


<div class="container">
  <h2 class="mb-3">ğŸ“ ìƒˆ Todo ì¶”ê°€</h2>

  <form id="todoForm">
    <div class="mb-3">
      <label for="title" class="form-label">ì œëª©</label>
      <input type="text" class="form-control" id="title" required>
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">ì„¤ëª…</label>
      <textarea class="form-control" id="description" rows="3"></textarea>
    </div>

<!--    <div class="mb-3">-->
<!--      <label for="dueDate" class="form-label">ë§ˆê°ì¼</label>-->
<!--      <input type="datetime-local" class="form-control" id="dueDate" required>-->
<!--    </div>-->
    <div class="mb-3">
      <label for="category" class="form-label">ì¹´í…Œê³ ë¦¬</label>
      <select class="form-select" id="category">
        <option value="ìš´ë™">ğŸ‹ï¸ ìš´ë™</option>
        <option value="ì•½ì†">ğŸ“… ì•½ì†</option>
        <option value="ê³µë¶€">ğŸ“– ê³µë¶€</option>
        <option value="ë°ì´íŠ¸">ğŸ’‘ ë°ì´íŠ¸</option>
        <option value="ì•Œë°”">ğŸ“   ì•Œë°”</option>
        <option value="ê¸°íƒ€" selected>ğŸ“ ê¸°íƒ€</option>
      </select>
    </div>



    <div class="mb-3">
<!--      <label for="priority" class="form-label">ìš°ì„ ìˆœìœ„</label>-->
      <select class="form-select" id="priority">
        <option value="1">1 - ë†’ìŒ</option>
        <option value="2">2</option>
        <option value="3" selected>3 - ë³´í†µ</option>
        <option value="4">4</option>
        <option value="5">5 - ë‚®ìŒ</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary w-100">ì¶”ê°€í•˜ê¸°</button>
  </form>
  <div class="text-center mt-3">
</div>
    </div>
  </div>


<!-- JavaScript -->
<script>



  document.getElementById('todoForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const title = document.getElementById('title').value;
    const description = document.getElementById('description').value;
    const priority = document.getElementById('priority').value;
    const category = document.getElementById('category').value;

    const todoData = {
      title: title,
      description: description,
      priority: parseInt(priority),
      category: category,
      status: "IN_PROGRESS"
    };

    fetch('/save/todo', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + localStorage.getItem('token') // âœ… JWT í† í° í¬í•¨
      },
      body: JSON.stringify(todoData)
    })
            .then(response => {
              if (!response.ok) {
                throw new Error("ğŸš¨ ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: " + response.statusText);
              }

              // âœ… ì‘ë‹µì´ ì—†ì„ ê²½ìš°ì—ë„ ì—ëŸ¬ ì—†ì´ ì²˜ë¦¬
              return response.text().then(() => {});
            })
            .then(() => {
              alert("âœ… Todoê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!");
              window.location.href = "/todo";
            })
            .catch(error => {
              alert("ğŸš¨ ì˜¤ë¥˜ ë°œìƒ: " + error.message);
            });
    });
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
